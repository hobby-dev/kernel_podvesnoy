# Исходники Ядра
Скачиваем исходники с kernel.org (или через git)
Распаковываем:
```
tar -xJf linux-4.10.tar.xz
cd linux-4.10
```
# Что делает ядро?
## системные вызовы (с которыми мы знакомились ранее)
## обслуживает железо:
1. Процессор
2. Память
3. Перефирия (видео, таймеры ... ) - делают полезную работу за процессор. Как правило, представлены зарезервированными участками памяти.
## Прерывания (например: пришёл Ethernet пакет) 


# Контексты выполнения ядра
* привелигированный контекст
* пользовательский контекст

# Как запускается компьютер? 
1. BIOS : setup CPU and other hardware (Level 1 loader)
2. Find master boot record on choosen drive, pass control to Level 2 loader
3. Level 2 loader (Grub, Lilo...) finds kernel, setup peripheral devices (network...)
4. Kernel 
```
$ file /boot/vmlinuz-4.8...
```
5. Init process (pid 1) - initialize all processes, kill zombie processes. Represented as in-memory filesystem, temporary.

# В чём отличия от других POSIX-ядер?
* динамическая загрузка модулей
* приоритетное планирование
* процессы не отличаются от потоков
* объектно-ориентированная модель устройств (а также файловых систем)

# Kernel contents:
1. arch - платформозависимый код, много ассемблерного кода
2. block - блочные устройства,  
3. crypto - шифрование
4. Documentation - смотреть сюда!
5. drivers - дрова для всего 
6. firmware - микропрограммы для аппаратуры
7. fs - реализации файловых систем
8. include - заголовочные файлы для разработки драйверов и ядра
9. init 
10. ipc - межпроцессное взаимодействие
11. kernel - подсистемы ядра


# Конфигурирование
Убедиться, что установлен libncurses5-dev
```
make menuconfig 
```
Помощь в меню: H
Кросс-компиляция: сборка под другую архитектуру


Литература: автобиографическая книга Линуса Торвальдса



